<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Estimate static severity for an expanding time series — cfr_rolling • cfr</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Estimate static severity for an expanding time series — cfr_rolling"><meta property="og:description" content="Calculates the CFR at each time point in the case and death time
series supplied, using an expanding window of time. The static CFR is
calculated for each time point, using the time series from the start to each
time point, and increasing the number of time points included by one in each
iteration."><meta property="og:image" content="https://epiverse-trace.github.io/cfr/logo.svg"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-XZ471458FQ"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-XZ471458FQ');
</script></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><nav class="navbar fixed-top navbar-default navbar-expand-lg bg-"><div class="container">
    
    <a href="https://epiverse-trace.github.io/" class="external-link"><img src="../logo_white.svg" id="logo" alt="Epiverse-TRACE"></a>
    <a class="navbar-brand me-2" href="../index.html">cfr</a>

    <small class="nav-text text-default me-auto version-number" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li>
  <a href="../articles/cfr.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li class="divider">
    <li class="dropdown-header">Package vignettes</li>
    <li>
      <a href="../articles/estimate_static_severity.html">Calculating a static, delay-adjusted estimate of disease severity</a>
    </li>
    <li>
      <a href="../articles/estimate_time_varying_severity.html">Estimating how disease severity varies over the course of an outbreak</a>
    </li>
    <li>
      <a href="../articles/estimate_ascertainment.html">Estimating the proportion of cases that are ascertained during an outbreak</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Handling data from other packages</li>
    <li>
      <a href="../articles/data_from_incidence2.html">Handling data from {incidence2}</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Handling delay distributions</li>
    <li>
      <a href="../articles/delay_distributions.html">A primer on working with delay distributions</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Sotware permissions and regulations</li>
    <li>
      <a href="../articles/software-permissions.html">Software permissions and regulations</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li>
  <a href="https://github.com/epiverse-trace/cfr/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav></header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Estimate static severity for an expanding time series</h1>
    <small class="dont-index">Source: <a href="https://github.com/epiverse-trace/cfr/blob/HEAD/R/cfr_rolling.R" class="external-link"><code>R/cfr_rolling.R</code></a></small>
    <div class="hidden name"><code>cfr_rolling.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Calculates the CFR at each time point in the case and death time
series supplied, using an expanding window of time. The static CFR is
calculated for each time point, using the time series from the start to each
time point, and increasing the number of time points included by one in each
iteration.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">cfr_rolling</span><span class="op">(</span><span class="va">data</span>, delay_density <span class="op">=</span> <span class="cn">NULL</span>, poisson_threshold <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>data</dt>
<dd><p>A <code>&lt;data.frame&gt;</code> containing the outbreak data. A daily time
series with dates or some other absolute indicator of time (e.g. epiday or
epiweek) and the numbers of new cases and new deaths at each time point.
Note that the required columns are "date" (for the date), "cases" (for the
number of reported cases), and "deaths" (for the number of reported deaths)
on each day of the outbreak.</p>
<p>Note that the <code>&lt;data.frame&gt;</code> is required to have an unbroken sequence of
dates with no missing dates in between. The "date" column must be of class
<code>Date</code> (see <code><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date()</a></code>).</p>
<p>Note also that the total number of cases must be greater than the total
number of reported deaths.</p></dd>


<dt>delay_density</dt>
<dd><p>An optional argument that controls whether delay
correction is applied in the severity estimation.
May be <code>NULL</code>, for no delay correction, or a function that returns the
density function of a distribution to evaluate
density at user-specified values, e.g.
<code>function(x) stats::dgamma(x = x, shape = 5, scale = 1)</code>.</p></dd>


<dt>poisson_threshold</dt>
<dd><p>The case count above which to use Poisson
approximation. Set to 100 by default. Must be &gt; 0.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A <code>&lt;data.frame&gt;</code> with the date, maximum likelihood estimate and 95%
confidence interval of the daily severity estimates, named
"severity_mean", "severity_low", and "severity_high", with one row for each
day in the original data.frame.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>When delay correction is applied by passing a delay distribution
density function to <code>delay_density</code>, the internal function
<code><a href="dot-estimate_severity.html">.estimate_severity()</a></code> is used to calculate the rolling severity.</p>
<p>Note that in the naive method the severity estimate and confidence intervals
cannot be calculated for days on which the cumulative number of cases since
the start of the time-series, and for days on which the cumulative number of
deaths reported exceeds the cumulative reported cases, and is returned as
<code>NA</code>.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># load package data</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"ebola1976"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># estimate severity without correcting for delays</span></span></span>
<span class="r-in"><span><span class="fu"><a href="cfr_static.html">cfr_static</a></span><span class="op">(</span><span class="va">ebola1976</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   severity_mean severity_low severity_high</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      0.955102    0.9210866     0.9773771</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># estimate severity for each day while correcting for delays</span></span></span>
<span class="r-in"><span><span class="co"># obtain onset-to-death delay distribution parameters from Barry et al. 2018</span></span></span>
<span class="r-in"><span><span class="co"># The Lancet. &lt;https://doi.org/10.1016/S0140-6736(18)31387-4&gt;</span></span></span>
<span class="r-in"><span><span class="co"># view only the first values</span></span></span>
<span class="r-in"><span><span class="va">estimate</span> <span class="op">&lt;-</span> <span class="fu">cfr_rolling</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">ebola1976</span>,</span></span>
<span class="r-in"><span>  delay_density <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/stats/GammaDist.html" class="external-link">dgamma</a></span><span class="op">(</span><span class="va">x</span>, shape <span class="op">=</span> <span class="fl">2.40</span>, scale <span class="op">=</span> <span class="fl">3.33</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> `cfr_rolling()` is a convenience function to help understand how additional data influences the overall (static) severity. Use `cfr_time_varying()` instead to estimate severity changes over the course of the outbreak.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Some daily ratios of total deaths to total cases with known outcome are below 0.01%: some CFR estimates may be unreliable.FALSE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">estimate</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         date severity_mean severity_low severity_high</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 1976-08-25            NA           NA            NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 1976-08-26         1e-04        1e-04        0.9999</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 1976-08-27         1e-04        1e-04        0.9999</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 1976-08-28         1e-04        1e-04        0.9999</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 1976-08-29         1e-04        1e-04        0.9990</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 1976-08-30         1e-04        1e-04        0.9942</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Pratik R. Gupte, Adam Kucharski, Tim Russell.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.8.</p>
</div>

      </footer></div>

  


  

  </body></html>

